(()=>{console.log("hi, webpack");class t{constructor(t){this.v="Fixed",this.p=100,this.value=t}toString(){return String(this.value)}}class e{constructor(t){this.v="Var",this.p=100,this.value=t}toString(){return"x"+String(this.value)}}class n{constructor(t){this.v="And",this.p=50,this.A=t}toString(){return this.A.map((t=>(this.p>t.p?"(":"")+t.toString()+(this.p>t.p?")":""))).join("&")}}getAnd=(t,e)=>new n([t,e]);class o{constructor(t){this.v="Or",this.p=30,this.A=t}toString(){return this.A.map((t=>(this.p>t.p?"(":"")+t.toString()+(this.p>t.p?")":""))).join("|")}}getOr=(t,e)=>new o([t,e]);class s{constructor(t){this.v="Not",this.p=70,this.b=t}toString(){return"!"+(this.p>this.b.p?"(":"")+this.b.toString()+(this.p>this.b.p?")":"")}}getNot=e=>"Not"===e.v?e.b:"And"===e.v?new o(e.A.map((t=>{getNot(t)}))):"Or"===e.v?new n(e.A.map((t=>{getNot(t)}))):"Fixed"===e.v?new t(1-e.value):new s(e),console.log(getNot(new e(1)).toString()),console.log(getNot(getNot(new e(1))).toString()),parseToLogic=t=>{console.log("parsing to logic",t);let e="",n=[];endToken=()=>{n.push(e),e=""};let o=0;for(let n of t)if(" "!==n)if("("===n)o+=1;else if(")"===n){if(o-=1,0===o&&endToken(),o<0)throw"unbalanced parens!"}else["&","|","!"].includes(n)?(e.length>0&&endToken(),e+=n,endToken()):e+=n;if(e.length>0&&endToken(),0!==o)throw"unbalanced parens!";return console.log("picked up tokens",n),1===n.length?parseToBase(n[0]):parseTokenArray(n)},parseTokenArray=t=>{if(1===t.length)return parseToLogic(t[0]);for(let e of[["|",getOr],["&",getAnd],["!",(t,e)=>getNot(e)]]){let n=e[0],o=e[1];if(t.includes(n)){opIndex=t.indexOf(n);let e=t.slice(0,opIndex),s=t.slice(opIndex+1);return 1===e.length?e=parseToLogic(e[0]):e.length>0&&(e=parseTokenArray(e)),s=1===s.length?parseToLogic(s[0]):parseTokenArray(s),o(e,s)}}throw console.log("tokens",t),"Don't understand tokens"},parseToBase=n=>"x"===n[0]?new e(Number(n.slice(1))):new t(Number(n)),document.getElementById("goButton").addEventListener("click",(()=>{text=document.getElementById("input").value,console.log("text",text),outputBit=parseToLogic(text),console.log(outputBit),document.getElementById("output").innerHTML=outputBit.toString()}))})();